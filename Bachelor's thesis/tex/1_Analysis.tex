%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Foreword %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
This chapter will focus on analysis of the project as a part of a software development that connects customer's
requirements to the system and its following design and development.

Analysis of software project is intended to define detailed description of the product, break it down into
requirements to the system, their systematization, detection of dependencies, and documentation.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%% SP1 and SP2 subjects %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{BI-SP1 and BI-SP2 subjects}
The work on the ElateMe project started within the framework of the BI-SP1~subject. Our development team devided into
groups: Android, iOS and Back-end developers. Our task was to define and document main client's
requirements, implement functioning prototypes of mobile applications and back-end server \ac{API}. During
BI-SP1~subject, Maksym Balatsko was working on prototype of back-end server, so choise of used technologies was up to
him. Then the technology stack was agreed with supervisor of the project. Chosen technologies will be discussed in
the next chapter.

Because of changes in requirements and provided a new interface design of the mobile applications, analysis and it's
documentation has undergone certain changes. And at the start of BI-SP2~subject implementation of back-end API,
on which Maksym and I worked, has started.


\newcounter{reqcounter}[section]
\newcommand{\req}[2]{
    \stepcounter{reqcounter}
    \indent\par
    \textbf{#1\arabic{reqcounter} #2}
}
\newcommand{\funcreq}[1]{\req{F}{#1}}
\newcommand{\nonfreq}[1]{\req{N}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Functional requirements %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Functional requirements}

\subsection{Authorization}
\funcreq{Sign up via Facebook}
User will be able to sign up to ElateMe application with his Facebook account. Application will load user's data
such as name, surname, email, date of birth, etc.
\funcreq{Logout}
Authorized user will be able to log out. In this case he will also stop receiving any notifications from the
application.
\funcreq{Load friends from social network}
On initial login application will load list of user's friends that are already signed up in this application. This
users will be considered as friends in ElateMe application.

\subsection{Friendship management}
\funcreq{View friends list}
User will be able to view list of his Facebook friends that are already signed up in application.
\funcreq{Create friends group}
User will be able to create friends group. Groups will be used for simplification of friends management.
\funcreq{Delete friends group}
User will be able to delete friends group.

\subsection{Wish management}
\funcreq{Create wish}
User will be able to create wish, set it's title, description, price(amount of money that he(user) wants to gather),
and deadline.
\funcreq{Delete wish}
User will be able to delete his wish if nobody will have donated money yet.
\funcreq{Close wish}
User will be able to close his wish. Money that will have been gatherd on this wish will be refunded to donators.
\funcreq{View users' wishes list}
User will be able to browse wishes lists of his friends.
\funcreq{Create surprise wish}
User will be able to create surprise wish for one of his friends. In this case user to whom the wish was addressed
will not have acces to it and will not know about it until the whole amount is collected.
\funcreq{View contributed wishes list}
User will be able to view list of wishes he will have contributed to.

\subsection{Feed}
\funcreq{View user's feed}
User will recieve feed with latest wishes of his friends.

\subsection{Donation management}
\funcreq{Donate to wish}
User will be able to financially contribute to wishes of his friends.
\funcreq{Refund}
In the case of the closure of the wish, all gatherd money will be refunded to donators.

\subsection{Comments management}
\funcreq{View wishes comments list}
User will be able to view list of comments under the wish he will be browsing.
\funcreq{Comment wish}
User will be able to leave a comment under the wish.
\funcreq{Delete comment}
User will be able to delete his comment.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Non-functional requirements %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Non-functional requirement}

\subsection{Back-end \ac{API}}
\nonfreq{\ac{REST}ful}
Back-end API will follow architectural constraints of REST architectural style.
\nonfreq{\ac{HTTPS}}
Server will comunicate with client via \ac{HTTPS}.
\nonfreq{PostgreSQL database}
PostgreSQL will be used as the main DBMS.
\nonfreq{Performance}
Server will be able to serve 1500 requests per second.

\subsection{Payments}
\nonfreq{FIO-bank}
User will be able to make payments via FIO-bank.
\nonfreq{Bitcoin}
User will be able to make payments via Bitcoin.
\nonfreq{Secure payments}
System will ensure secure payments.
\nonfreq{Consistency}
Servers data about payments will be consistent with data in payments systems (FIO-bank, Bitcoin, etc.).
System will react accordingly to errors appeared during payments.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Use cases %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Use cases}
** insert Use cases diagram **



%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Domain model %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Domain model}
** insert Domain model diagram **



%%%%%%%%%%%%%%%%%%%%%%%%%%%%% System structure %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{System structure}
The whole ElateMe application system is devided into components. Main components are server, Android and iOS clients.

Detailed structure of server and its connection with external interfaces are presented at the component diagram
\ref{fig:component_diagram}. As seen in the diagram, server provides interface for mobile applications to communicat via
REST api. Server also uses interfaces of Facebook (Graph API) to recieve needed data about users and interfaces of
payment systems (FIO-bank and Bitcoin) for payments processing.

Inside the server is divided into components that are responsible for storing and processing data of application
entities. This components are called \textit{apps} in Django. Apps communicate with database via Django \textit{models}.
Models in Django is an interface designed to simplify querying to database.

\image[1.3]{component_diagram}{pdf}{Component diagram}

The diagram also shows the use of interfaces of Facebook and payment systems by mobile clients, but they are not a part
of my work, so their design and implementation will not be described in this thesis.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Authentication %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Authentication}
User has to be authorized to use the application. ElateMe application will not provide in-app registration. User
authentication will be conducted exclusively through third-party systems. It is made to simplify the
registration in the application.


\subsection{Facebook}
User authentication will be conducted through his Facebook account.

After first login, application will get from Facebook needed information about the user: first name, last name,
email address, list of user's friends. User's Facebook friends who are already logged in to the application,
automatically become his friends in the ElateMe.

Despite the lack of in-app registration, user's information recieved from Facebook will be stored in ElateMe system
as well, because user will be able to add other users to his friend list, create friends groups independently from
Facebook. From which it follows that user's ElateMe account will not be synchronized with his Facebook account.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Payments system %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Payments system}




\subsection{Refund mechanism}













